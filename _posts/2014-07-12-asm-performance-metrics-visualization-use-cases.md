---
layout: post
title: 'ASM performance metrics visualization: Use cases'
date: 2014-07-12 14:25:18.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- ASM
- Tableau
tags: []
meta:
  _edit_last: '40807211'
  publicize_google_plus_url: https://plus.google.com/101126738655139704850/posts/RqzLvRmsgtn
  _wpas_done_2225791: '1'
  publicize_linkedin_url: http://www.linkedin.com/updates?discuss=&scope=16310177&stype=M&topic=5893716556868775936&type=U&a=NE1U
  _wpas_done_5547632: '1'
  publicize_twitter_user: BertrandDrouvot
  publicize_twitter_url: http://t.co/Pqa1qGR5NY
  geo_public: '0'
  publicize_facebook_url: https://facebook.com/1450323461887838
  _wpas_done_7950430: '1'
  _publicize_pending: '1'
  _publicize_done_external: a:1:{s:8:"facebook";a:1:{i:100007305933776;b:1;}}
  _wpas_done_2077996: '1'
  _wpas_skip_7950430: '1'
  _wpas_skip_5547632: '1'
  _wpas_skip_2225791: '1'
  _wpas_skip_2077996: '1'
  _wpas_skip_8482624: '1'
author:
  login: bdrouvot
  email: bdtoracleblog@gmail.com
  display_name: bdrouvot
  first_name: ''
  last_name: ''
permalink: "/2014/07/12/asm-performance-metrics-visualization-use-cases/"
---
Now that I can [graph&nbsp;ASM performance metrics](http://bdrouvot.wordpress.com/2014/07/08/graphing-asm-performance-metrics/ "Graphing ASM performance metrics"), let's see some use cases.

To display the ASM metrics I'll use the csv file generated by the [csv\_asm\_metrics utility](http://bdrouvot.wordpress.com/2014/07/08/graphing-asm-performance-metrics/ "Graphing ASM performance metrics") and&nbsp;[Tableau](http://www.tableausoftware.com/public//community)&nbsp;for the visualization. Of course you could use the visualization tool of your choice.

**Use case 1: Display&nbsp;the TOP IO consumers**

You consolidated several databases on the same machine and you want to visualize&nbsp;which database is generating&nbsp;most of the IO throughput for Reads. You can visualize this that way with Tableau (I keep the "columns", "rows" and "marks" shelf into the print screen so that you can reproduce with Tableau) :

[![Screen Shot 2014-07-12 at 14.46.40]({{ site.baseurl }}/assets/images/screen-shot-2014-07-12-at-14-46-40.png)](https://bdrouvot.files.wordpress.com/2014/07/screen-shot-2014-07-12-at-14-46-40.png)

I can see that one of my databases is generating&nbsp;most of the throughput.

Should you use RAC, you could split those metrics per ASM instances as well:

[![Screen Shot 2014-07-12 at 14.47.58]({{ site.baseurl }}/assets/images/screen-shot-2014-07-12-at-14-47-58.png)](https://bdrouvot.files.wordpress.com/2014/07/screen-shot-2014-07-12-at-14-47-58.png)

I can see that most of the activity is recorded on ASM2, which makes sense as my RAC services are configured as preferred/available (Active/Passive configuration) and started on the \*\_2 database instances (linked to ASM2).

**Use case 2: I want to see the Read IO distributions by Failgroups**

You can visualize this that way with Tableau (I keep the "columns", "rows" and "marks" shelf into the print screen so that you can reproduce with Tableau):

[![Screen Shot 2014-07-12 at 10.09.08]({{ site.baseurl }}/assets/images/screen-shot-2014-07-12-at-10-09-08.png)](https://bdrouvot.files.wordpress.com/2014/07/screen-shot-2014-07-12-at-10-09-08.png)

We can see that the IOs are equally distributed over the Failgroups. It is the expected behaviour as I am not using the ASM Preferred Read feature.

**Use case 3: Should I use the ASM Preferred Read feature on my extended RAC?**

Suppose the host hosting the **ASM1** instance is close to the disk array&nbsp;on which the " **WIN**" failgroup has been created. The same way,&nbsp;the host hosting the&nbsp; **ASM2** &nbsp;instance is close to the disk array&nbsp;on which the " **JMO**" failgroup has been created. Let's see the Read IO latency between the ASM instances and the failgroups.

You can visualize this that way with Tableau (I keep the "columns", "rows" and "marks" shelf into the print screen so that you can reproduce with Tableau):

[![Screen Shot 2014-07-12 at 10.17.16]({{ site.baseurl }}/assets/images/screen-shot-2014-07-12-at-10-17-16.png)](https://bdrouvot.files.wordpress.com/2014/07/screen-shot-2014-07-12-at-10-17-16.png)

As you can see the ASM1 instance reports&nbsp;faster reads on the "WIN" failgroup and ASM2 reports&nbsp;faster reads on the "JMO" failgroup which makes sense according to our configuration. I can also check&nbsp;if&nbsp;the reads performance **are good enough** when the Reads are done **on the farthest disk array** (ASM1 "reading" on the JMO failgroup and ASM2 "reading"&nbsp;on the WIN failgroup) and then decide if the ASM Preferred Read feature needs to be implemented.

**Use case 4: Simulate and Visualize the impact of the ASM preferred feature on the read IOPS and throughput** (See this [blog post](http://bdrouvot.wordpress.com/2014/08/11/simulate-and-visualize-the-impact-of-the-asm-preferred-feature-on-the-read-iops-and-throughput/ "Simulate and Visualize the impact of the ASM preferred feature on the read IOPS and throughput")).

**Use case 5: Are ASM rebalance and preferred read working together?** (See this [blog post](http://bdrouvot.wordpress.com/2014/08/22/are-asm-rebalance-and-preferred-read-working-together/ "Are ASM rebalance and preferred read working together?"))

**Use case 6: A closer look at ASM rebalance, Part I: Disks have been added.** (See this [blog post](http://bdrouvot.wordpress.com/2014/08/25/a-closer-look-at-asm-rebalance-part-i-disks-have-been-added/ "A closer look at ASM rebalance, Part I: Disks have been added"))

**Use case 7: A closer look at ASM rebalance, Part II: Disks have been dropped.** (See this [blog post](http://bdrouvot.wordpress.com/2014/09/01/a-closer-look-at-asm-rebalance-part-ii-disks-have-been-dropped/ "A closer look at ASM rebalance, Part II: Disks have been dropped"))

**Use case 8: A closer look at ASM rebalance, Part III: Disks have been added and dropped (at the same time).** (See this [blog post](http://bdrouvot.wordpress.com/2014/09/01/a-closer-look-at-asm-rebalance-part-iii-disks-have-been-added-and-dropped-at-the-same-time/ "A closer look at ASM rebalance, Part III: Disks have been added and dropped (at the same time)"))

**Remarks:**

- ASM is not performing any reads for the database, it records metrics for&nbsp;the database instances that it is servicing.

- I am not using the&nbsp;[Flex ASM feature](http://www.oracle.com/technetwork/products/cloud-storage/oracle-12c-asm-overview-1965430.pdf)&nbsp;for the previous use cases. With the Flex ASM feature in place the interpretations done into the use case 3 would not have been possible (as ASM1 could serve database instance located near&nbsp;to ASM2 and vice versa). Furthermore [the preferred read feature is broken with Flex ASM 12c (12.1) in place](http://bdrouvot.wordpress.com/2013/07/02/flex-asm-12c-12-1-and-extended-rac-be-careful-to-unpreferred-read/ "Flex ASM 12c (12.1) and Extended Rac: be careful to “unpreferred” read !").

- You can imagine&nbsp; **a lot of use cases** &nbsp;thanks to the measures collected (_Reads/s, Kby Read/s, ms/Read, By/Read, Writes/s, Kby Write/s, ms/Write, By/Write_) and all those dimensions (_Snap Time, INST, DBINST, DG, FG, DSK_).

- Don't forget that [If you don't picture it, you may not understand it](http://www.oraclerealworld.com/if-i-cant-picture-it-i-cant-understand-it/).

You can&nbsp; **download** &nbsp;the&nbsp;_asm\_metrics_ and the_&nbsp;__csv\_asm\_metrics_&nbsp;utilities from&nbsp;[this repository](https://docs.google.com/folderview?id=0B7Jf_4JdsptpRHdyOWk1VTdUdEU).

